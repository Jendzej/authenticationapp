default:
  image: python:3.10.5-slim
  cache:
    paths:
      - ~/.cache/pip/
  before_script:
    - cd mainapp
    - python -m pip install -r requirements.txt


migrations:
  stage: build
  script:
    - cd mainapp
    - python manage.py makemigrations
    - python manage.py migrate
    - python manage.py check


django-tests:
  stage: test
  script:
    - python manage.py test
